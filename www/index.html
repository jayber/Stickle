<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="msapplication-tap-highlight" content="no"/>
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <!--<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />-->
    <link rel="stylesheet" type="text/css" href="css/reset.css"/>

    <link href="css/ionic.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/index.css"/>

    <script type="text/javascript" src="js/log4javascript.js"></script>
    <script type="text/javascript">
        var log = log4javascript.getDefaultLogger();
        log.setLevel(log4javascript.Level.DEBUG);

    </script>
    <script src="js/jquery-1.9.0.min.js"></script>
    <script src="js/ionic.bundle.js"></script>

    <title>Stickle</title>
</head>
<body ng-app="stickle" ng-controller="stickleCtrl" ng-cloak>


<ion-side-menus>
    <ion-side-menu-content>

        <ion-header-bar class="bar-dark deep">
            <button menu-toggle="left" class="button button-icon icon ion-navicon" NOTng-click="promptPhone()"></button>
            <h1 class="title">Stickle</h1>
        </ion-header-bar>

        <ion-content class="main">

            <div id="errors"></div>
            <div ng-class="{hidden: contacts.length>0}" class="loading">loading contacts...</div>
            <ion-list class="stickle-list">
                <ion-item ng-repeat="contact in stickles" class="stickle-item">
                    <div class="contact-list-item">
                        <div class="contact-details">
                            <div class="name">{{contact.displayName}}</div>
                            <p>
                            <span ng-repeat="num in contact.phoneNumbers">
                            <span class="type">{{num.type}}:</span> {{num.value}}
                            </span>
                            </p>
                        </div>
                    </div>
                </ion-item>
            </ion-list>
            <ion-list class="contact-list">
                <ion-item ng-repeat="contact in contacts"
                          ng-class="{'disable':!contact.stickler,'first':$first,'hidden':contact.hidden}">
                    <div class="contact-list-item">
                        <div class="contact-details">
                            <div class="name">{{contact.displayName}}</div>
                            <p>
                            <span ng-repeat="num in contact.phoneNumbers">
                            <span class="type">{{num.type}}:</span> {{num.value}}
                            </span>
                            </p>
                        </div>
                        <div ng-switch="contact.stickler" class="contact-action">
                            <div ng-switch-when="true">
                                <label class="toggle">
                                    <input type="checkbox" ng-disabled="!contact.stickler"
                                           ng-change="onToggle(contacts[$index])" ng-model="contacts[$index].stickled">

                                    <div class="track">
                                        <div class="handle"></div>
                                    </div>
                                </label>
                            </div>
                            <div ng-switch-default class="icon ion-ios-personadd-outline">&nbsp;</div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>
        </ion-content>

    </ion-side-menu-content>
    <ion-side-menu side="left">
        <ion-header-bar class="bar-dark">
            <h1 class="title">Settings</h1>
        </ion-header-bar>
        <ion-content scroll="false">
            <form ng-submit="validateAndRegister()">
                <div class="padding">
                    <div class="list">
                        <label class="item item-input">
                            <input type="text" placeholder="Your display name" ng-model="details.displayName">
                        </label>
                        <label class="item item-input">
                            <input type="tel" placeholder="Your telephone number" ng-model="details.phoneNumber">
                        </label>
                    </div>
                    <button type="submit" class="button button-block button-positive">Save</button>
                </div>
            </form>
        </ion-content>
    </ion-side-menu>
</ion-side-menus>

<script src="js/angular/angular-resource.js"></script>
<script src="node_modules/angular-cookies/angular-cookies.js"></script>
<script src="bower_components/ng-websocket/ng-websocket.js"></script>
<script type="text/javascript" src="js/contacts.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/polyFilla.js"></script>

</body>
</html>
